<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <style th:replace="fragments/style"></style>
</head>
<body>
<nav th:replace="fragments/header :: header"></nav>
<div class="container-fluid" style="margin-top: 50px">
    <div class="panel panel-primary">
        <div class="panel panel-heading text-center">
            <h4><b><span th:text="${addStatus==true?'New Purches Order Add':'Update Purches Order '}"></span></b></h4>
        </div>
        <div class="panel-body">
            <!--Page Header Content-->
            <div class="row">
                <div class="col-sm-4 ">
                    <a class="btn btn-primary" href="/home"> Return Home</a>
                </div>
                <div class="col-sm-4" style="text-align: center;">
                    <h4 class="text-info"></h4>
                </div>
                <div class="col-sm-4 text-right">
                    <a href="/purchaseOrder">
                        <button class="btn btn-sm btn-primary"><span
                                class="glyphicon glyphicon-list">&nbsp; View List </span></button>
                    </a>
                </div>
            </div>
            <!--search content-->
            <div class="container-fluid" th:if="${searchArea==true}">
                <div class="row">
                    <div class="row">
                        <div class="col-sm-6 text-center">
                            <button class="btn btn-sm btn-info" data-toggle="modal" data-target="#supplier">Find
                                Supplier
                            </button>
                        </div>
                        <div class="col-sm-6 text-center">
                            <button class="btn btn-sm btn-info" data-toggle="modal" data-target="#item">Find Item
                            </button>
                        </div>
                    </div>
                    <!-- The Item Modal -->
                    <div class="modal fade" id="item">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <form action="/purchaseOrder/findByItem" class="form-horizontal" method="post">
                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h4 class="modal-title">Find By Item</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>

                                    <!-- Modal body -->
                                    <div class="modal-body">

                                        <div class="form-group">
                                            <label class="control-label col-md-4" for="txtId">Item Code</label>
                                            <div class="col-md-8">
                                                <input class="form-control" id="txtId" name="code"
                                                       placeholder="Enter Item Code Here"
                                                       type="text"/>
                                            </div>
                                        </div>

                                    </div>

                                    <!-- Modal footer -->
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="text-left col-sm-6">
                                                <button type="button" class="btn btn-danger" data-dismiss="modal">Close
                                                </button>
                                            </div>
                                            <div class="text-right col-sm-6">
                                                <button type="submit" class="btn btn-success">Submit</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- The supplier Modal -->
                    <div class="modal fade" id="supplier">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <form action="/purchaseOrder/findBySupplier" class="form-horizontal" method="post">
                                    <!-- Modal Header -->
                                    <div class="modal-header">
                                        <h4 class="modal-title">Find By Supplier</h4>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>

                                    <!-- Modal body -->
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="form-group">
                                                <div class="col-md-4">
                                                    <label for="supp">Select list:</label>
                                                    <select class="form-control" id="supp">
                                                        <option value=""> Please Select</option>
                                                        <option value="name">Name</option>
                                                        <option value="code">Code</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-7">
                                                    <label for="criteria">Value:</label>
                                                    <input class="form-control" id="criteria"
                                                           placeholder="Enter Value Here" required type="text"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal footer -->
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="text-left col-sm-6">
                                                <button type="button" class="btn btn-danger" data-dismiss="modal">Close
                                                </button>
                                            </div>
                                            <div class="text-right col-sm-6">
                                                <button type="submit" class="btn btn-success">Submit</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Add form content-->
            <div class="container-fluid" th:if="${searchArea==false}">
                <div class="row">
                    <form class="form-horizontal"
                          th:action="${addStatus==true?'/purchaseOrder/add':'/purchaseOrder/update'}"
                          th:method="POST" th:object="${purchaseOrder}">
                        <label th:if="${#fields.hasErrors('*')}" th:text="'Errors: '">Errors: </label>
                        <ul>
                            <li th:each="err: ${#fields.errors('*')}" th:text="${err}"></li>
                        </ul>
                        <!--From Start-->
                        <div class="form-group text-left" th:if="${addStatus==false}">
                            <label class="control-label col-md-4" for="id">ID :</label>
                            <div class="col-md-8">
                                <input class="form-control" id="id" placeholder="Enter ID Here"
                                       th:field="*{id}" type="text" readonly/>
                                <span class="error" th:errors="*{id}"
                                      th:if="${#fields.hasErrors('id')}">Error Number</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table class="table table-striped table-condensed text-center">
                                    <thead>
                                    <tr>
                                        <th>Index</th>
                                        <th>Supplier</th>
                                        <th>Item</th>
                                        <th> Available Qty.</th>
                                        <th> Requested Qty.</th>
                                        <th class="text-center">Modify</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="ledger, rowCount : ${ledgers}">
                                        <th th:text="${rowCount.count}"></th>
                                        <th th:text="${ledger.supplier.name}">
                                            <input type="hidden" th:value="${ledger.supplier}">
                                        </th>
                                        <th th:text="${ledger.item.description}">
                                            <input type="hidden" th:value="${ledger.item}">
                                        </th>
                                        <th th:text="${ledger.availableQuantity}"></th>
                                        <th><input type="text" th:field="*{quantity}">

                                        <th><a class="btn btn-danger"><i
                                                aria-hidden="true" class="fa fa-trash-o"></i>
                                            Delete</a></th>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group text-left">
                                    <label class="control-label col-md-4" for="expectedDate">Expected Date :</label>
                                    <div class="col-md-8">
                                        <input class="form-control" id="expectedDate" placeholder="Enter ID Here"
                                               th:field="*{expectedDate}" type="date" required/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6" th:if="${addStatus == false}">
                                <div class="form-group">
                                    <label class="control-label col-md-4" for="poS">PO Status</label>
                                    <div class="col-md-4">
                                        <select class="form-control" id="poS" th:field="*{purchaseOrderStatus}">
                                            <option th:each="p : ${purchaseOrderStatus}"
                                                    th:text="${p.purchaseOrderStatus}"
                                                    th:value="${p}"></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group text-left">
                                <label class="control-label col-md-4" for="remarks">Remarks :</label>
                                <div class="col-md-8">
                                    <input class="form-control" id="remarks" placeholder="Enter Remarks Here"
                                           th:field="*{remarks}" type="text"/>
                                </div>
                            </div>
                        </div>
                        <div class="text-center row">
                            <button class="btn btn-success" type="submit"><span
                                    class="glyphicon glyphicon-thumbs-up"></span>&nbsp; &nbsp;<span
                                    th:text="${addStatus==true?'Save': 'Update'}"></span></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="page-footer" th:replace="fragments/footer"></footer>
<script th:replace="fragments/script"></script>
</body>
</html>